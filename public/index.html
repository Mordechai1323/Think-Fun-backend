<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>API Documentation</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: "Roboto", sans-serif;
      }
      .card-header {
        cursor: pointer;
      }
      .card {
        margin: 16px !important;
      }
    </style>
  </head>
  <body>
    <div class="container my-5">
      <h1 class="text-center">API Documentation</h1>
      <div class="accordion" id="accordionExample1">
        <div class="card">
          <div class="card-header" id="heading1" data-toggle="collapse" data-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
            <h3 class="mb-0">sign up: <b>POST</b> /</h3>
          </div>
          <div id="collapse1" class="collapse" aria-labelledby="heading1" data-parent="#accordionExample1">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint allows users to create a new account in the system.</p>
              <h3>Request Body</h3>
              <p>The endpoint expects a JSON object with the following fields:</p>
              <ul>
                <li>name (string, required)</li>
                <li>email (string, required, unique)</li>
                <li>password (string, required)</li>
              </ul>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object with the following fields:</p>
              <ul>
                <li>id (string, generated by the server)</li>
                <li>name (string, same as in the request)</li>
                <li>email (string, same as in the request)</li>
                <li>password (string, masked with asterisks '*****')</li>
              </ul>
              <h3>Errors</h3>
              <p>The endpoint may return the following error codes:</p>
              <ul>
                <li>400 Bad Request: The request body is missing required fields or has invalid data types.</li>
                <li>401 Unauthorized: An account with the same email address already exists in the system.</li>
                <li>502 Bad Gateway: An internal error occurred while processing the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample2">
        <div class="card">
          <div class="card-header" id="heading2" data-toggle="collapse" data-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
            <h3 class="mb-0">log In: <b>POST</b> /</h3>
          </div>
          <div id="collapse2" class="collapse" aria-labelledby="heading2" data-parent="#accordionExample2">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint provides a convenient way for users to log in to their account.</p>
              <h3>Request Information</h3>
              <p>The endpoint requires a JSON object containing the following information:</p>
              <ul>
                <li>Email (string, required)</li>
                <li>Password (string, required)</li>
              </ul>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object with the following field:</p>
              <ul>
                <li>Token</li>
              </ul>
              <h3>Error Codes</h3>
              <p>The endpoint may return the following error codes in the event of a problem:</p>
              <ul>
                <li>400 Bad Request: Required fields are missing or data types are invalid.</li>
                <li>401 Unauthorized: The email or password provided do not match.</li>
                <li>502 Bad Gateway: An internal error occurred while processing the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample3">
        <div class="card">
          <div class="card-header" id="heading3" data-toggle="collapse" data-target="#collapse3" aria-expanded="true" aria-controls="collapse3">
            <h3 class="mb-0">Update User Information: <b>PUT</b> /</h3>
          </div>
          <div id="collapse3" class="collapse" aria-labelledby="heading3" data-parent="#accordionExample3">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint allows users to update their name and email in the system.</p>
              <h3>Request Information</h3>
              <p>The endpoint requires a JSON object containing the following information:</p>
              <ul>
                <li>Name (string, required)</li>
                <li>Email (string, required)</li>
              </ul>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object representing the updated user information.</p>
              <h3>Error Codes</h3>
              <p>The endpoint may return the following error codes in the event of a problem:</p>
              <ul>
                <li>400 Bad Request: Required fields are missing or data types are invalid.</li>
                <li>502 Bad Gateway: An internal error occurred while processing the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample4">
        <div class="card">
          <div class="card-header" id="heading4" data-toggle="collapse" data-target="#collapse4" aria-expanded="true" aria-controls="collapse4">
            <h3 class="mb-0">Update User Password: <b>PUT</b> /editPassword</h3>
          </div>
          <div id="collapse4" class="collapse" aria-labelledby="heading4" data-parent="#accordionExample4">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint allows users to update their password in the system.</p>
              <h3>Request Information</h3>
              <p>The endpoint requires a JSON object containing the following information:</p>
              <ul>
                <li>Old Password (string, required)</li>
                <li>New Password (string, required)</li>
              </ul>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object representing the updated user information.</p>
              <h3>Error Codes</h3>
              <p>The endpoint may return the following error codes in the event of a problem:</p>
              <ul>
                <li>400 Bad Request: Required fields are missing or data types are invalid.</li>
                <li>401 Unauthorized: The old password provided does not match the user's current password.</li>
                <li>502 Bad Gateway: An internal error occurred while processing the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample5">
        <div class="card">
          <div class="card-header" id="heading5" data-toggle="collapse" data-target="#collapse5" aria-expanded="true" aria-controls="collapse5">
            <h3 class="mb-0">delete: <b>DELETE</b> /</h3>
          </div>
          <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordionExample5">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint allows users to delete their account in the system.</p>
              <h3>Authentication</h3>
              <p>The endpoint requires authentication to access the user's information.</p>
              <h3>Response</h3>
              <p>The endpoint returns the result of the deletion in a JSON object.</p>
              <h3>Errors</h3>
              <p>The endpoint may return the following error codes:</p>
              <ul>
                <li>502 Bad Gateway: An internal error occurred while processing the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample6">
        <div class="card">
          <div class="card-header" id="heading6" data-toggle="collapse" data-target="#collapse6" aria-expanded="true" aria-controls="collapse6">
            <h3 class="mb-0">Get User Information: <b>GET</b> /myInfo</h3>
          </div>
          <div id="collapse6" class="collapse" aria-labelledby="heading6" data-parent="#accordionExample6">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint allows a user to retrieve information about their account.</p>
              <h3>Request</h3>
              <p>This endpoint requires an authorization token to be passed as a header in the request. The token must be valid for the user's account.</p>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object containing the following fields:</p>
              <ul>
                <li>_id (string)</li>
                <li>name (string)</li>
                <li>email (string)</li>
              </ul>
              <p>The "password" field is not included in the response.</p>
              <h3>Errors</h3>
              <p>The endpoint may return the following error codes:</p>
              <ul>
                <li>401 Unauthorized: The request is missing an authorization token or the token is invalid for the user's account.</li>
                <li>500 Internal Server Error: An error occurred while processing the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample7">
        <div class="card">
          <div class="card-header" id="heading7" data-toggle="collapse" data-target="#collapse7" aria-expanded="true" aria-controls="collapse7">
            <h3 class="mb-0">Check Token: <b>GET</b> /checkToken</h3>
          </div>
          <div id="collapse7" class="collapse" aria-labelledby="heading7" data-parent="#accordionExample7">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint is used to check the authenticity of a token.</p>
              <h3>Authentication</h3>
              <p>This endpoint requires an authenticated token to be passed in the request header.</p>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object containing the decoded token data if the token is valid.</p>
              <h3>Errors</h3>
              <p>The endpoint may return the following error codes:</p>
              <ul>
                <li>401 Unauthorized: The token passed in the request header is not valid or has expired.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample8">
        <div class="card">
          <div class="card-header" id="heading8" data-toggle="collapse" data-target="#collapse8" aria-expanded="true" aria-controls="collapse8">
            <h3 class="mb-0" :><b>GET</b> /count</h3>
          </div>
          <div id="collapse8" class="collapse" aria-labelledby="heading8" data-parent="#accordionExample8">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint returns the number of users in the database and the total number of pages based on a specified number of results per page.</p>
              <h3>Query Parameters</h3>
              <ul>
                <li>perPage (optional, default value: 10) - the number of results per page</li>
              </ul>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object with the following fields:</p>
              <ul>
                <li>count - the total number of users in the database</li>
                <li>page - the total number of pages</li>
              </ul>
              <h3>Errors</h3>
              <p>The endpoint may return the following error codes:</p>
              <ul>
                <li>502 Bad Gateway: An internal error occurred while processing the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample9">
        <div class="card">
          <div class="card-header" id="heading9" data-toggle="collapse" data-target="#collapse9" aria-expanded="true" aria-controls="collapse9">
            <h3 class="mb-0">Get all Users: <b>GET</b> /allUsers</h3>
          </div>
          <div id="collapse9" class="collapse" aria-labelledby="heading9" data-parent="#accordionExample9">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint is used to retrieve all users from the database, filtered and sorted based on query parameters.</p>
              <h3>Authentication</h3>
              <p>This endpoint requires an authenticated token with admin role to be passed in the request header.</p>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object containing an array of user objects, filtered and sorted based on the query parameters.</p>
              <h3>Query Parameters</h3>
              <p>The following query parameters can be used to filter and sort the returned data:</p>
              <ul>
                <li>perPage: Number of users to retrieve per page (default 10).</li>
                <li>page: Page number to retrieve (default 1).</li>
                <li>sort: Sort key (default "_id").</li>
                <li>reverse: Sort order, "yes" for ascending, "no" for descending (default "no").</li>
              </ul>
              <h3>Errors</h3>
              <p>The endpoint may return the following error codes:</p>
              <ul>
                <li>401 Unauthorized: The token passed in the request header is not valid or does not have admin role.</li>
                <li>502 Bad Gateway: An error occurred while querying the database.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="accordion" id="accordionExample10">
        <div class="card">
          <div class="card-header" id="heading10" data-toggle="collapse" data-target="#collapse10" aria-expanded="true" aria-controls="collapse10">
            <h3 class="mb-0">Update User Role: <b>PATCH</b> /role</h3>
          </div>
          <div id="collapse10" class="collapse" aria-labelledby="heading10" data-parent="#accordionExample10">
            <div class="card-body">
              <h3>Description</h3>
              <p>This endpoint is used to change the role of a user.</p>
              <h3>Authentication</h3>
              <p>This endpoint requires an authenticated token of an admin user to be passed in the request header.</p>
              <h3>Request</h3>
              <p>The endpoint requires two parameters in the query string:</p>
              <ul>
                <li>user_id: the ID of the user whose role is to be changed</li>
                <li>role: the new role for the user</li>
              </ul>
              <h3>Response</h3>
              <p>The endpoint returns a JSON object indicating the success or failure of the update.</p>
              <h3>Errors</h3>
              <p>The endpoint may return the following error codes:</p>
              <ul>
                <li>
                  401 Unauthorized: The token passed in the request header is not valid or has expired, or the user tries to change their own role or the role of the super admin.
                </li>
                <li>502 Bad Gateway: An internal error occurred during the processing of the request.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
